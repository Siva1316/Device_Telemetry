tables:
  - name: device_telemetry_data
    sql: {{ load_sql('device_telemetry_data') }}
    description: Device Master Data
    public: true

    joins:
      - name: device_events_process
        relationship: one_to_one
        sql: "{TABLE.device_id}={device_events_process.device_id}" 
      
    dimensions:
      - name: timestamp
        column: timestamp
        type: string
        description: Parsed timestamp from transaction data

      - name: device_id  
        column: device_id
        type: string
        description: Device Identifier
        primary_key: true

      - name: cpu_usage
        column: cpu_usage
        type: number
        description: CPU Usage

      - name: memory_usage
        column: memory_usage
        type: number
        description: Memory utilization

      - name: disk_health
        column: disk_health
        type: number
        description: Disk Health 

      - name: battery_health
        column: battery_health
        type: number
        description: Battery Health

      - name: temperature
        column: temperature
        type: number
        description: Device internal temperature

      - name: fan_speed
        column: fan_speed
        type: number
        description: Fan Speed

      - name: error_code
        column: error_code
        type: string
        description: What is the error code per modem

      - name: internet_status
        column: internet_status
        type: string
        description: Internet status
      
      - name: process_count
        column: process_count
        type: number
        description: Process Count

      - name: thread_count
        column: thread_count
        type: number
        description: Thread Count

    measures:
      - name: unique_device
        sql: device_id
        type: count
        description: Total device id records in the dataset